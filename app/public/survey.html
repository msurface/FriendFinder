<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Friend Finder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Latest compiled and minified CSS & JS-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<!--Container for the entier page-->
<div class="container">
    <h2>Answer these questions to find your best friend!</h2>
    <hr>

    <!--About Me Name & Photo Link-->
    <h3><strong>About You</strong></h3>
    <h4>Name (required)</h4>
    <input type="text" id="name" class="form-control" required>

    <h4>Link to Photo Image (required)</h4>
    <input type="text" id="photo" class="form-control" required>

    <hr>

    <!--Start of Questions-->
    <h3><strong>Question 1</strong></h3>
    <h4>You love carne asada tacos!</h4>
    <select class="chosen-select" id="ques1">
        <option value=""></option>
        <option value="1">1 (strongly disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (strongly agree)</option>
    </select>

    <h3><strong>Question 2</strong></h3>
    <h4>You hate people who clap when the air plane lands!</h4>
    <select class="chosen-select" id="ques2">
        <option value=""></option>
        <option value="1">1 (strongly disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (strongly agree)</option>
    </select>

    <h3><strong>Question 3</strong></h3>
    <h4>You love when Drake goes hard on the track (ex: Trophies)!</h4>
    <select class="chosen-select" id="ques3">
        <option value=""></option>
        <option value="1">1 (strongly disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (strongly agree)</option>
    </select>

    <h3><strong>Question 4</strong></h3>
    <h4>You hate when Drake is soft (ex: you know the songs)!</h4>
    <select class="chosen-select" id="ques4">
        <option value=""></option>
        <option value="1">1 (strongly disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (strongly agree)</option>
    </select>

    <h3><strong>Question 5</strong></h3>
    <h4>You love tequila!</h4>
    <select class="chosen-select" id="ques5">
        <option value=""></option>
        <option value="1">1 (strongly disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (strongly agree)</option>
    </select>

    <h3><strong>Question 6</strong></h3>
    <h4>You hate waiting in line!</h4>
    <select class="chosen-select" id="ques6">
        <option value=""></option>
        <option value="1">1 (strongly disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (strongly agree)</option>
    </select>

    <h3><strong>Question 7</strong></h3>
    <h4>You love Rick Ross, Metallica, and Gary Clark Jr!</h4>
    <select class="chosen-select" id="ques7">
        <option value=""></option>
        <option value="1">1 (strongly disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (strongly agree)</option>
    </select>

    <h3><strong>Question 8</strong></h3>
    <h4>Microsoft Windows sucks ass</h4>
    <select class="chosen-select" id="ques8">
        <option value=""></option>
        <option value="1">1 (strongly disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (strongly agree)</option>
    </select>

    <h3><strong>Question 9</strong></h3>
    <h4>Beach life is the best kind of life!</h4>
    <select class="chosen-select" id="ques9">
        <option value=""></option>
        <option value="1">1 (strongly disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (strongly agree)</option>
    </select>

    <h3><strong>Question 10</strong></h3>
    <h4>People falling is always funny!</h4>
    <select class="chosen-select" id="ques9">
        <option value=""></option>
        <option value="1">1 (strongly disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (strongly agree)</option>
    </select>
    <br>
    <br>

    <!--submit button-->
    <button type="submit" class="btn btn-lg" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>SUBMIT YOUR ANSWERS</button>

    <hr>
    <!--footer html here with a link to my repo-->
    <footer class="footer">
        <div class="container">
            <p><a href="/app/routing/apiFriends.js">API Friends List</a><a href="https://github.com/msurface/FriendFinder"></a></p>
        </div>
    </footer>

</div>

<!--Modal-->
<div id="results-modal" class"modal fade" role="dialog">
    <div class="modal-dialog">

        <!--Content-->
        <div class="modal-content">
            <!--header-->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h2 class="modal-title">Best Match</h2>
            </div>
            <!--body-->
            <div class="modal-body">
                <h2 id="match-name"></h2>
                <img id="match-image" src="https://www.askideas.com/media/13/Best-Friend-Smileys-On-Hand.jpg" alt="">
            </div>
            <!--footer-->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!--Here goes the on click functions-->
<script type="text/javascript">
    var config = {
        ".chosen-select": {},
        ".chosen-select-deselect": {
            allow_single_deselect: true
        },
        ".chosen-select-no-single": {
            no_results_text: "Nothing Found!"
        },
        ".chosen-select-width": {
            width: "95%"
        }
    };

    for (var selector in config) {
        $(selector).chosen(config[selector]);
    }

    //store the question answers
    $(#submit).on("click", function(event) {
        event.preventDefault();

        //validation 
        function validateForm() {
            var valid = true;
            $(".form-control").each(function() {
                if ($(this).val() === "") {
                    valid = false;
                }
            });

            $(".chosen-select").each(function() {

                if ($(this).val() === "") {
                    valid = false;
                }
            });
            return valid;
        }

        // if all required fields are valid
        if (validateForm()) {
            
            // create an object for the user's data
            var userData = {
                "name": $("#name").val(),
                "photo": $("#photo").val(),
                "score": [
                    $("ques1").val(),
                    $("ques2").val(),
                    $("ques3").val(),
                    $("ques4").val(),
                    $("ques5").val(),
                    $("ques6").val(),
                    $("ques7").val(),
                    $("ques8").val(),
                    $("ques9").val(),
                    $("ques10").val(),
                ]
            };

            // AJAX post to friends API of data capatured
            $.post("/api/friends", userData, function(data) {
                
                // Grab results from AJAX post to display the best match name and photo
                $("match-name").text(data.name);
                $("match-img").attr("src", data.photo).css("width", "100px", "height", "100px");

                // show the modal with the best match
                $("results-modal").modal("toggle");
            });
        } else {
            alert("please fill out all the fields...then submit!")
        }
    });

</script>
<body>
    
</body>
</html>